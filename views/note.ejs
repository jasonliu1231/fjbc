<!DOCTYPE html>
<html lang="en">

<head>
  <%-include('head') %>
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        overflow: hidden;
        text-align: center;
      }

      canvas {
        display: block;
        background-color: white;
      }

      .nowrap {
        display: inline-block;
        white-space: nowrap;
      }
    </style>
    <script>
      const url = "http://172.16.150.25:8081/api";
      let id = "";
      window.addEventListener("load", () => {
        const urlParams = new URLSearchParams(window.location.search);
        id = urlParams.get('id');
        getAskacademyInfo(id);
        getAskacademyImage(id);
      })

      async function getAskacademyInfo(id) {
        const config = {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
          },
        }
        const response = await fetch(`${url}/askacademy/${id}`, config);
        const data = await response.json();
        if (response.ok) {
          const itemNames = Object.keys(data);
          itemNames.forEach(itemName => {
            if (itemName != "created_at" || itemName != "course_list" || itemName != "source_list" || itemName != "english_listening" || itemName != "inquiry_method") {
              const element = document.querySelector(`#${itemName}`);
              if (element != null) {
                element.value = data[itemName];
              }
            }
            // å¡«è¡¨æ™‚é–“
            document.querySelector("#studentInfo").innerHTML = new Date(data.created_at).toLocaleString();
            // å•ç­ä¾†æº
            if (itemName == "source_list") {
              if (data[itemName].length > 0) {
                const source_list = document.querySelectorAll(".source_list");
                data[itemName].forEach(i => {
                  source_list.forEach(e => {
                    if (e.value == i.source_name) {
                      e.checked = true;
                    }
                  })
                })
              }

            }
            // æœŸæœ›ç§‘ç›®
            if (itemName == "course_list") {
              if (data[itemName].length > 0) {
                const course_list = document.querySelectorAll(".course_list");
                data[itemName].forEach(i => {
                  course_list.forEach(e => {
                    if (e.value == i.course_name) {
                      e.checked = true;
                    }
                  })
                })
              }
            }
            // è‹±è½æˆç¸¾
            if (itemName == "english_listening") {
              if (data[itemName] != null) {
                document.querySelector(`input[name="english_listening"][value="${data[itemName]}"]`).checked = true;
              }
            }
            // è©¢ç­æ–¹å¼
            if (itemName == "inquiry_method") {
              if (data[itemName] != null) {
                document.querySelector(`input[name="inquiry_method"][value="${data[itemName]}"]`).checked = true;
              }
            }
          })
        }
      }

      async function getAskacademyImage(id) {
        const config = {
          method: "GET",
          responseType: "arraybuffer",
          headers: {
            // "Content-Type": "application/json",
          },
        }
        const response = await fetch(`${url}/askacademy/image/${id}`, config);
        const data = await response.arrayBuffer();
        if (response.ok) {
          if (data.byteLength != 0) {
            const canvas = document.getElementById('myCanvas');
            const ctx = canvas.getContext('2d');

            // åˆ›å»ºä¸€ä¸ª Uint8Arrayï¼Œç”¨äºåŒ…è£… ArrayBuffer ä¸­çš„æ•°æ®
            const uint8Array = new Uint8Array(data);

            // åˆ›å»ºä¸€ä¸ª ImageData å¯¹è±¡ï¼Œç”¨äºå°†å›¾åƒæ•°æ®ç»˜åˆ¶åˆ° Canvas ä¸Š
            const imageData = ctx.createImageData(window.innerWidth, window.innerHeight * 0.9);

            // å°† ArrayBuffer ä¸­çš„æ•°æ®å¡«å……åˆ° ImageData å¯¹è±¡ä¸­
            imageData.data.set(uint8Array);

            // å°† ImageData å¯¹è±¡ç»˜åˆ¶åˆ° Canvas ä¸Š
            ctx.putImageData(imageData, 0, 0);

          }
        }
      }

      // ä¿å­˜ Canvas å†…å®¹
      function saveAsImage() {
        const canvas = document.getElementById('myCanvas');
        const imageDataURL = canvas.toDataURL('image/png');
        canvas.toBlob(async function (blob) {
          console.log(imageDataURL);
          const file = new File([blob], 'canvas_image.jpeg', { type: 'image/jpeg' });
          let formData = new FormData();
          formData.append("uploaded_file", file);
          console.log(file);
          const config = {
            method: "POST",
            headers: {
              // è¨­å®šå¾Œè¦è‡ªè¡Œè¨­å®šé‚Šç•Œã€‚æ‰€ä»¥è¨»è§£æ‰
              // "Content-Type": "multipart/form-data",
            },
            body: formData
          }
          const response = await fetch(`${url}/askacademy/image/${id}`, config);
        }, 'image/jpeg');

        const link = document.createElement('a');

      }

      async function submit() {
        // åŸºæœ¬è³‡æ–™
        const student_name = document.querySelector("#student_name").value || null;
        if (!student_name) {
          alert("è«‹å¡«å¯«å­¸ç”Ÿå§“å");
          return;
        }
        const student_name_en = document.querySelector("#student_name_en").value || null;
        const student_mobile = document.querySelector("#student_mobile").value || null;
        const school = document.querySelector("#school").value || null;
        const grade = document.querySelector("#grade").value || null;
        const tel = document.querySelector("#tel").value || null;
        const address = document.querySelector("#address").value || null;
        const father_name = document.querySelector("#father_name").value || null;
        const father_mobile = document.querySelector("#father_mobile").value || null;
        const father_profession = document.querySelector("#father_profession").value || null;
        const father_office_tel = document.querySelector("#father_office_tel").value || null;
        const mother_name = document.querySelector("#mother_name").value || null;
        const mother_mobile = document.querySelector("#mother_mobile").value || null;
        const mother_profession = document.querySelector("#mother_profession").value || null;
        const mother_office_tel = document.querySelector("#mother_office_tel").value || null;
        const holiday_time = document.querySelector("#holiday_time").value || null;
        const Weekday_time = document.querySelector("#Weekday_time").value || null;
        const brother1 = document.querySelector("#brother1").value || null;
        const brother1_grade = document.querySelector("#brother1_grade").value || null;
        const brother2 = document.querySelector("#brother2").value || null;
        const brother2_grade = document.querySelector("#brother2_grade").value || null;

        // èˆˆè¶£ç­ç´š
        const course_list_selected = document.querySelectorAll(".course_list");
        const course_list = [];
        course_list_selected.forEach((item) => {
          if (item.checked) {
            course_list.push({
              "course_name": item.value || null
            });
          }
        })
        const course_extend = document.querySelector("#course_extend").value || null;

        // å•ç­ä¾†æº
        const source_list_selected = document.querySelectorAll(".source_list");
        const source_list = [];
        source_list_selected.forEach((item) => {
          if (item.checked) {
            source_list.push({
              "source_name": item.value || null
            });
          }
        })

        // å­¸ç”Ÿç‹€æ³
        const exam_ranking = document.querySelector("#exam_ranking").value || null;
        const exam_ranking1 = document.querySelector("#exam_ranking1").value || null;
        const exam_ranking2 = document.querySelector("#exam_ranking2").value || null;
        const chinese_score = document.querySelector("#chinese_score").value || null;
        const math_score = document.querySelector("#math_score").value || null;
        const english_score = document.querySelector("#english_score").value || null;
        const english_listening = document.querySelector("input[name='english_listening']:checked") ? document.querySelector("input[name='english_listening']:checked").value : null;
        const enature_score = document.querySelector("#enature_score").value || null;
        const biology_score = document.querySelector("#biology_score").value || null;
        const physics_score = document.querySelector("#physics_score").value || null;
        const chemical_score = document.querySelector("#chemical_score").value || null;
        const earth_science_score = document.querySelector("#earth_science_score").value || null;
        const physics_chemical_score = document.querySelector("#physics_chemical_score").value || null;
        const social_score = document.querySelector("#social_score").value || null;
        const geography_score = document.querySelector("#geography_score").value || null;
        const history_score = document.querySelector("#history_score").value || null;
        const civics_score = document.querySelector("#civics_score").value || null;

        // èª²ç¨‹è¡¨
        const activity_status1 = document.querySelector("#activity_status1").value || null;
        const activity_status2 = document.querySelector("#activity_status2").value || null;
        const activity_status3 = document.querySelector("#activity_status3").value || null;
        const activity_status4 = document.querySelector("#activity_status4").value || null;
        const activity_status5 = document.querySelector("#activity_status5").value || null;
        const activity_status6_1 = document.querySelector("#activity_status6_1").value || null;
        const activity_status6_2 = document.querySelector("#activity_status6_2").value || null;
        const activity_status6_3 = document.querySelector("#activity_status6_3").value || null;
        const activity_status7_1 = document.querySelector("#activity_status7_1").value || null;
        const activity_status7_2 = document.querySelector("#activity_status7_2").value || null;
        const activity_status7_3 = document.querySelector("#activity_status7_3").value || null;
        const inquiry_method = document.querySelector("input[name='inquiry_method']:checked") ? document.querySelector("input[name='inquiry_method']:checked").value : null;
        const reception = document.querySelector("#reception").value || null;

        const info = {
          student_name,
          student_name_en,
          student_mobile,
          tel,
          school,
          grade,
          address,
          brother1,
          brother1_grade,
          brother2,
          brother2_grade,
          father_name,
          father_mobile,
          father_office_tel,
          father_profession,
          mother_name,
          mother_mobile,
          mother_office_tel,
          mother_profession,
          holiday_time,
          Weekday_time,
          // Remark,
          course_extend,
          exam_ranking,
          exam_ranking1,
          exam_ranking2,
          chinese_score,
          math_score,
          english_score,
          english_listening,
          enature_score,
          biology_score,
          physics_score,
          chemical_score,
          earth_science_score,
          physics_chemical_score,
          social_score,
          geography_score,
          history_score,
          civics_score,
          activity_status1,
          activity_status2,
          activity_status3,
          activity_status4,
          activity_status5,
          activity_status6_1,
          activity_status6_2,
          activity_status6_3,
          activity_status7_1,
          activity_status7_2,
          activity_status7_3,
          inquiry_method,
          reception,
          course_list,
          source_list
        }
        saveAsImage()
        // const config = {
        //   method: "PUT",
        //   headers: {
        //     "Content-Type": "application/json",
        //   },
        //   body: JSON.stringify(info)
        // }
        // const response = await fetch(`${url}/askacademy/${id}`, config);
        // if (response.ok) {
        //   window.location.reload()
        // }
      }
    </script>
</head>

<body>
  <div class="offcanvas offcanvas-top" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
    id="offcanvasScrolling" aria-labelledby="studentInfo">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="studentInfo">å­¸ç”Ÿè³‡æ–™</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <h5 class="p-2">åŸºæœ¬è³‡æ–™</h5>
      <div class="input-group p-1">
        <span class="input-group-text">å­¸ç”Ÿå§“å</span>
        <input type="text" aria-label="student_name" id="student_name" class="form-control" />
        <span class="input-group-text">è‹±æ–‡åå­</span>
        <input type="text" aria-label="student_name_en" id="student_name_en" class="form-control" />
        <span class="input-group-text">å­¸ç”Ÿæ‰‹æ©Ÿ</span>
        <input type="text" aria-label="student_mobile" id="student_mobile" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">å°±è®€å­¸æ ¡</span>
        <input type="text" aria-label="school" id="school" class="form-control" />
        <span class="input-group-text">å¹´ç´š</span>
        <select class="form-select" id="grade">
          <option value=""></option>
          <option value="å¹¼å¤§ç­">å¹¼å¤§ç­</option>
          <option value="åœ‹å°ä¸€å¹´ç´š">åœ‹å°ä¸€å¹´ç´š</option>
          <option value="åœ‹å°äºŒå¹´ç´š">åœ‹å°äºŒå¹´ç´š</option>
          <option value="åœ‹å°ä¸‰å¹´ç´š">åœ‹å°ä¸‰å¹´ç´š</option>
          <option value="åœ‹å°å››å¹´ç´š">åœ‹å°å››å¹´ç´š</option>
          <option value="åœ‹å°äº”å¹´ç´š">åœ‹å°äº”å¹´ç´š</option>
          <option value="åœ‹å°å…­å¹´ç´š">åœ‹å°å…­å¹´ç´š</option>
          <option value="åœ‹ä¸­ä¸€å¹´ç´š">åœ‹ä¸­ä¸€å¹´ç´š</option>
          <option value="åœ‹ä¸­äºŒå¹´ç´š">åœ‹ä¸­äºŒå¹´ç´š</option>
          <option value="åœ‹ä¸­ä¸‰å¹´ç´š">åœ‹ä¸­ä¸‰å¹´ç´š</option>
          <option value="é«˜ä¸­ä¸€å¹´ç´š">é«˜ä¸­ä¸€å¹´ç´š</option>
          <option value="é«˜ä¸­äºŒå¹´ç´š">é«˜ä¸­äºŒå¹´ç´š</option>
          <option value="é«˜ä¸­ä¸‰å¹´ç´š">é«˜ä¸­ä¸‰å¹´ç´š</option>
        </select>
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">å¸‚è©±</span>
        <input type="text" aria-label="tel" id="tel" class="form-control" />
        <span class="input-group-text">åœ°å€</span>
        <input type="text" aria-label="address" id="address" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">çˆ¶è¦ªå§“å</span>
        <input type="text" aria-label="father_name" id="father_name" class="form-control" />
        <span class="input-group-text">é€£çµ¡é›»è©±</span>
        <input type="text" aria-label="father_mobile" id="father_mobile" class="form-control" />
        <span class="input-group-text">è·æ¥­</span>
        <input type="text" aria-label="father_profession" id="father_profession" class="form-control" />
        <span class="input-group-text">å…¬å¸é›»è©±</span>
        <input type="text" aria-label="father_office_tel" id="father_office_tel" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">æ¯è¦ªå§“å</span>
        <input type="text" aria-label="mother_name" id="mother_name" class="form-control" />
        <span class="input-group-text">é€£çµ¡é›»è©±</span>
        <input type="text" aria-label="mother_mobile" id="mother_mobile" class="form-control" />
        <span class="input-group-text">è·æ¥­</span>
        <input type="text" aria-label="mother_profession" id="mother_profession" class="form-control" />
        <span class="input-group-text">å…¬å¸é›»è©±</span>
        <input type="text" aria-label="mother_office_tel" id="mother_office_tel" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">å‡æ—¥é€£çµ¡æ™‚é–“</span>
        <input type="text" aria-label="holiday_time" id="holiday_time" class="form-control" />
        <span class="input-group-text">å¹³æ—¥é€£çµ¡æ™‚é–“</span>
        <input type="text" aria-label="Weekday_time" id="Weekday_time" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">æœ‰èˆˆè¶£çš„ç­åˆ¥</span>
        <div class="form-control">
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="åœ‹æ–‡" id="class_chinese" />
            <label class="form-check-label" for="class_chinese"> åœ‹æ–‡ </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="æ•¸å­¸" id="class_math" />
            <label class="form-check-label" for="class_math"> æ•¸å­¸ </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="è‹±æ–‡" id="class_english" />
            <label class="form-check-label" for="class_english"> è‹±æ–‡ </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="ç¤¾æœƒ" id="class_social" />
            <label class="form-check-label" for="class_social"> ç¤¾æœƒ </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="ç‰©ç†" id="class_natural" />
            <label class="form-check-label" for="class_natural"> ç‰©ç† </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="åŒ–å­¸" id="class_chemistry" />
            <label class="form-check-label" for="class_chemistry"> åŒ–å­¸ </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="ç”Ÿç‰©" id="class_biology" />
            <label class="form-check-label" for="class_biology"> ç”Ÿç‰© </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input course_list" type="checkbox" value="åœ°ç§‘" id="class_earthScience" />
            <label class="form-check-label" for="class_earthScience"> åœ°ç§‘ </label>
          </div>
        </div>
        <span class="input-group-text">å…¶ä»–</span>
        <input id="course_extend" type="text" aria-label="class_other" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">å…¶ä»–å…„å¼Ÿå§Šå¦¹</span>
        <div class="form-control">
          <div class="input-group p-1">
            <span class="input-group-text">å…„å§å§“å</span>
            <input type="text" aria-label="brother1" id="brother1" class="form-control" />
            <span class="input-group-text">å¹´ç´š</span>
            <select class="form-select" id="brother1_grade">
              <option value=""></option>
              <option value="å¹¼å¤§ç­">å¹¼å¤§ç­</option>
              <option value="åœ‹å°ä¸€å¹´ç´š">åœ‹å°ä¸€å¹´ç´š</option>
              <option value="åœ‹å°äºŒå¹´ç´š">åœ‹å°äºŒå¹´ç´š</option>
              <option value="åœ‹å°ä¸‰å¹´ç´š">åœ‹å°ä¸‰å¹´ç´š</option>
              <option value="åœ‹å°å››å¹´ç´š">åœ‹å°å››å¹´ç´š</option>
              <option value="åœ‹å°äº”å¹´ç´š">åœ‹å°äº”å¹´ç´š</option>
              <option value="åœ‹å°å…­å¹´ç´š">åœ‹å°å…­å¹´ç´š</option>
              <option value="åœ‹ä¸­ä¸€å¹´ç´š">åœ‹ä¸­ä¸€å¹´ç´š</option>
              <option value="åœ‹ä¸­äºŒå¹´ç´š">åœ‹ä¸­äºŒå¹´ç´š</option>
              <option value="åœ‹ä¸­ä¸‰å¹´ç´š">åœ‹ä¸­ä¸‰å¹´ç´š</option>
              <option value="é«˜ä¸­ä¸€å¹´ç´š">é«˜ä¸­ä¸€å¹´ç´š</option>
              <option value="é«˜ä¸­äºŒå¹´ç´š">é«˜ä¸­äºŒå¹´ç´š</option>
              <option value="é«˜ä¸­ä¸‰å¹´ç´š">é«˜ä¸­ä¸‰å¹´ç´š</option>
            </select>
          </div>
          <div class="input-group p-1">
            <span class="input-group-text">å¼Ÿå¦¹å§“å</span>
            <input type="text" aria-label="brother2" id="brother2" class="form-control" />
            <span class="input-group-text">å¹´ç´š</span>
            <select class="form-select" id="brother2_grade">
              <option value=""></option>
              <option value="å¹¼å¤§ç­">å¹¼å¤§ç­</option>
              <option value="åœ‹å°ä¸€å¹´ç´š">åœ‹å°ä¸€å¹´ç´š</option>
              <option value="åœ‹å°äºŒå¹´ç´š">åœ‹å°äºŒå¹´ç´š</option>
              <option value="åœ‹å°ä¸‰å¹´ç´š">åœ‹å°ä¸‰å¹´ç´š</option>
              <option value="åœ‹å°å››å¹´ç´š">åœ‹å°å››å¹´ç´š</option>
              <option value="åœ‹å°äº”å¹´ç´š">åœ‹å°äº”å¹´ç´š</option>
              <option value="åœ‹å°å…­å¹´ç´š">åœ‹å°å…­å¹´ç´š</option>
              <option value="åœ‹ä¸­ä¸€å¹´ç´š">åœ‹ä¸­ä¸€å¹´ç´š</option>
              <option value="åœ‹ä¸­äºŒå¹´ç´š">åœ‹ä¸­äºŒå¹´ç´š</option>
              <option value="åœ‹ä¸­ä¸‰å¹´ç´š">åœ‹ä¸­ä¸‰å¹´ç´š</option>
              <option value="é«˜ä¸­ä¸€å¹´ç´š">é«˜ä¸­ä¸€å¹´ç´š</option>
              <option value="é«˜ä¸­äºŒå¹´ç´š">é«˜ä¸­äºŒå¹´ç´š</option>
              <option value="é«˜ä¸­ä¸‰å¹´ç´š">é«˜ä¸­ä¸‰å¹´ç´š</option>
            </select>
          </div>
        </div>
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">å¦‚ä½•å¾—çŸ¥æœ¬ç­è³‡è¨Š</span>
        <div class="form-control">
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="è¦ªå‹ä»‹ç´¹" id="source1" />
            <label class="form-check-label" for="source1">
              è¦ªå‹ä»‹ç´¹
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="æ ¡åœ’DM" id="source2" />
            <label class="form-check-label" for="source2">
              æ ¡åœ’DM
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="å¯„ç™¼DM" id="source3" />
            <label class="form-check-label" for="source3"> å¯„ç™¼DM </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="ç°¡è¨Š" id="source4" />
            <label class="form-check-label" for="source4"> ç°¡è¨Š </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="å¤šæ˜“æ–‡æ•™ç¶²ç«™" id="source5" />
            <label class="form-check-label" for="source5">
              å¤šæ˜“æ–‡æ•™ç¶²ç«™
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="Google è¡¨å–®" id="source6" />
            <label class="form-check-label" for="source6">
              Google è¡¨å–®
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="FaceBook" id="source7" />
            <label class="form-check-label" for="source7">
              FaceBook
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="é—œéµå­—æœå°‹" id="source8" />
            <label class="form-check-label" for="source8">
              é—œéµå­—æœå°‹
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="é›»æ¨" id="source9" />
            <label class="form-check-label" for="source9">
              é›»æ¨
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="LINE" id="source10" />
            <label class="form-check-label" for="source10">
              LINE
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="è·¯é" id="source11" />
            <label class="form-check-label" for="source11">
              è·¯é
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input source_list" type="checkbox" value="å…¶ä»–" id="source12" />
            <label class="form-check-label" for="source12">
              å…¶ä»–
            </label>
          </div>
        </div>
      </div>
      <h5 class="p-2">å­¸ç”Ÿç‹€æ³</h5>
      <div class="input-group p-1">
        <span class="input-group-text">æ®µè€ƒæ ¡æ’</span>
        <input type="text" aria-label="exam_ranking" id="exam_ranking" class="form-control" />
        <span class="input-group-text">æ¨¡æ“¬è€ƒæ ¡æ’</span>
        <input type="text" aria-label="exam_ranking1" id="exam_ranking1" class="form-control" />
        <span class="input-group-text">æ¨¡æ“¬è€ƒå€æ’</span>
        <input type="text" aria-label="exam_ranking2" id="exam_ranking2" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">åœ‹æ–‡æˆç¸¾</span>
        <input type="text" aria-label="chinese_score" id="chinese_score" class="form-control" />
        <span class="input-group-text">æ•¸å­¸æˆç¸¾</span>
        <input type="text" aria-label="math_score" id="math_score" class="form-control" />
        <span class="input-group-text">è‹±æ–‡æˆç¸¾</span>
        <input type="text" aria-label="english_score" id="english_score" class="form-control" />
        <span class="input-group-text">è‹±è½æˆç¸¾</span>
        <div class="form-control">
          <div class="nowrap">
            <input class="form-check-input" type="radio" name="english_listening" value="3"
              id="english_listening_good" />
            <label class="form-check-label" for="english_listening_good">
              å¼·
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input" type="radio" name="english_listening" value="2" id="english_listening_so" />
            <label class="form-check-label" for="english_listening_so">
              ä¸­
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input" type="radio" name="english_listening" value="1"
              id="english_listening_bad" />
            <label class="form-check-label" for="english_listening_bad">
              å¼±
            </label>
          </div>
        </div>
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">è‡ªç„¶æˆç¸¾</span>
        <input type="text" id="enature_score" aria-label="enature_score" class="form-control" />
        <span class="input-group-text">ç”Ÿç‰©æˆç¸¾</span>
        <input type="text" id="biology_score" aria-label="biology_score" class="form-control" />
        <span class="input-group-text">ç‰©ç†æˆç¸¾</span>
        <input type="text" id="physics_score" aria-label="physics_score" class="form-control" />
        <span class="input-group-text">åŒ–å­¸æˆç¸¾</span>
        <input type="text" id="chemical_score" aria-label="chemical_score" class="form-control" />
        <span class="input-group-text">åœ°ç§‘æˆç¸¾</span>
        <input type="text" id="earth_science_score" aria-label="earth_science_score" class="form-control" />
        <span class="input-group-text">ç†åŒ–æˆç¸¾</span>
        <input type="text" id="physics_chemical_score" aria-label="physics_chemical_score" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">ç¤¾æœƒæˆç¸¾</span>
        <input type="text" id="social_score" aria-label="social_score" class="form-control" />
        <span class="input-group-text">åœ°ç†æˆç¸¾</span>
        <input type="text" id="geography_score" aria-label="geography_score" class="form-control" />
        <span class="input-group-text">æ­·å²æˆç¸¾</span>
        <input type="text" id="history_score" aria-label="history_score" class="form-control" />
        <span class="input-group-text">å…¬æ°‘æˆç¸¾</span>
        <input type="text" id="civics_score" aria-label="civics_score" class="form-control" />
      </div>
      <h5 class="p-2">èª²ç¨‹è¡¨</h5>
      <div class="input-group p-1">
        <span class="input-group-text">æ˜ŸæœŸä¸€</span>
        <input type="text" id="activity_status1" aria-label="activity_status1" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸäºŒ</span>
        <input type="text" id="activity_status2" aria-label="activity_status2" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸä¸‰</span>
        <input type="text" id="activity_status3" aria-label="activity_status3" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸå››</span>
        <input type="text" id="activity_status4" aria-label="activity_status4" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸäº”</span>
        <input type="text" id="activity_status5" aria-label="activity_status5" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">æ˜ŸæœŸå…­-æ—©</span>
        <input type="text" id="activity_status6_1" aria-label="activity_status6_1" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸå…­-ä¸­</span>
        <input type="text" id="activity_status6_2" aria-label="activity_status6_2" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸå…­-æ™š</span>
        <input type="text" id="activity_status6_3" aria-label="activity_status6_3" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">æ˜ŸæœŸæ—¥-æ—©</span>
        <input type="text" id="activity_status7_1" aria-label="activity_status7_1" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸæ—¥-ä¸­</span>
        <input type="text" id="activity_status7_2" aria-label="activity_status7_2" class="form-control" />
        <span class="input-group-text">æ˜ŸæœŸæ—¥-æ™š</span>
        <input type="text" id="activity_status7_3" aria-label="activity_status7_3" class="form-control" />
      </div>
      <div class="input-group p-1">
        <span class="input-group-text">è©¢ç­æ–¹å¼</span>
        <div class="form-control">
          <div class="nowrap">
            <input class="form-check-input" type="radio" value="é›»è©±" name="inquiry_method" id="inquiry_tel" />
            <label class="form-check-label" for="inquiry_tel">
              é›»è©±
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input" type="radio" value="ç¾å ´" name="inquiry_method" id="inquiry_live" />
            <label class="form-check-label" for="inquiry_live">
              ç¾å ´
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input" type="radio" value="E-MAIL" name="inquiry_method" id="inquiry_mail" />
            <label class="form-check-label" for="inquiry_mail">
              E-MAIL
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input" type="radio" value="å®˜ç¶²" name="inquiry_method" id="inquiry_web" />
            <label class="form-check-label" for="inquiry_web">
              å®˜ç¶²
            </label>
          </div>
          <div class="nowrap">
            <input class="form-check-input" type="radio" value="å…¶ä»–" name="inquiry_method" id="inquiry_other" />
            <label class="form-check-label" for="inquiry_other">
              å…¶ä»–
            </label>
          </div>
        </div>
        <span class="input-group-text">æ¥å¾…è€å¸«</span>
        <input type="text" aria-label="reception" id="reception" class="form-control" />
      </div>
      <!-- <p class="px-3 link-danger">å·²åŒæ„æœ¬è¡¨å–®æ”¶é›†ä¹‹å€‹äººè³‡æ–™ä½¿ç”¨æ¬Šï¼Œåƒ…æ–¼ã€Œå¤šæ˜“æ–‡ç†è£œç¿’ç­ã€ä½¿ç”¨ï¼Œéç¶“ç•¶äº‹äººåŒæ„ï¼Œä¸è½‰ä½œå…¶ä»–ç”¨é€”ã€‚</p> -->
    </div>

  </div>

  <canvas id="myCanvas"></canvas>
  <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
    <select id="size" class="form-select form-select btn btn-outline-primary px-4" aria-label="Small select example"
      onchange="sizeChange()">
      <option value="5" selected>ç­†å°–å¤§å°ï¼š5</option>
      <option value="10">ç­†å°–å¤§å°ï¼š10</option>
      <option value="15">ç­†å°–å¤§å°ï¼š15</option>
      <option value="20">ç­†å°–å¤§å°ï¼š20</option>
    </select>
    <input type="radio" class="btn-check" name="btnradio" id="drawButton" autocomplete="off" checked>
    <label class="btn btn-outline-primary text-nowrap" for="drawButton">æ›¸å¯«ç­†ï¼šâœï¸</label>
    <input type="radio" class="btn-check" name="btnradio" id="clearButton" autocomplete="off">
    <label class="btn btn-outline-primary text-nowrap" for="clearButton">æ©¡çš®æ“¦ï¼šğŸ§½</label>
  </div>
  <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling"
    aria-controls="offcanvasScrolling">å­¸ç”Ÿè³‡è¨Š</button>
  <button id="saveButton" type="button" class="btn btn-outline-success px-4" onclick="submit()">å„²å­˜</button>
  <script>
    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');
    let isDrawing = false;
    let isErasing = false;
    let lastX = 0;
    let lastY = 0;
    let size = document.querySelector('#size').value;

    function sizeChange() {
      size = document.querySelector('#size').value;
    }

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight * 0.9;

    // ç›£è½é»æ“Šç¬é–“
    canvas.addEventListener('mousedown', startDrawing);
    canvas.addEventListener('touchstart', startDrawing);

    function startDrawing(event) {
      event.preventDefault();
      if (event.type === 'mousedown' || (event.type === 'touchstart' && event.touches.length === 1)) {
        const { offsetX, offsetY } = getOffset(event);
        if (event.type === 'touchstart') {
          event = event.touches[0];
        }
        isDrawing = true;
        [lastX, lastY] = [offsetX, offsetY];
      }
    }

    // ç¹ªåœ–
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('touchmove', draw);

    function draw(event) {
      event.preventDefault();
      let isWeb = event.type === 'mousemove' ? event.buttons === 1 : true
      if (event.type === 'touchmove') {
        event = event.touches[0]
      }

      if (isDrawing && isWeb) { // é¼ æ ‡å·¦é”®æŒ‰ä¸‹
        const { offsetX, offsetY } = getOffset(event);
        ctx.strokeStyle = isErasing ? 'white' : 'black';
        ctx.lineJoin = 'round';
        ctx.lineCap = 'round';
        ctx.lineWidth = size;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(offsetX, offsetY);
        ctx.stroke();
        [lastX, lastY] = [offsetX, offsetY];
      }
    }

    // äº‹ä»¶åœ¨ Canvas ä¸­çš„åç§»ä½ç½®
    function getOffset(event) {
      const rect = canvas.getBoundingClientRect();
      const offsetX = event.clientX - rect.left;
      const offsetY = event.clientY - rect.top;
      return { offsetX, offsetY };
    }

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    // é»æ“ŠçµæŸ
    // canvas.addEventListener('mouseup', endDrawing);
    // canvas.addEventListener('touchend', endDrawing);

    // function endDrawing(event) {
    //   isDrawing = false;
    //   isErasing = false;
    // }

    // åˆ‡æ¢æ¨¡å¼
    function drawButton() {
      isErasing = false;
    }

    function clearButton() {
      isErasing = true;
    }

    document.getElementById('drawButton').addEventListener('click', drawButton);
    document.getElementById('clearButton').addEventListener('click', clearButton);
  </script>
</body>

</html>